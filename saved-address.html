<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Saved Addresses</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="delivery-address-box">
      <h3>Saved Addresses</h3>
      <ul id="address-list" style="list-style:none;padding:0;"></ul>
    </div>
  </div>

  <script>
    const list = document.getElementById("address-list");
    let addresses = JSON.parse(localStorage.getItem("savedAddresses")) || [];

    function renderList() {
      list.innerHTML = "";
      if (addresses.length === 0) {
        list.innerHTML = "<p>No addresses saved.</p>";
        return;
      }

      addresses.forEach((addr, i) => {
        const li = document.createElement("li");
        li.style.marginBottom = "10px";
        li.innerHTML = `
          <div style="display:flex;justify-content:space-between;align-items:center;background:#fff;padding:10px;border-radius:6px;box-shadow:0 0 4px rgba(0,0,0,0.1);">
            <span>${addr}</span>
            <div>
              <button onclick="selectAddress(${i})" style="margin-right:5px;">Use</button>
              <button onclick="editAddress(${i})" style="margin-right:5px;">Edit</button>
              <button onclick="deleteAddress(${i})">Delete</button>
            </div>
          </div>
        `;
        list.appendChild(li);
      });
    }

    function selectAddress(index) {
      localStorage.setItem("location", addresses[index]);
      window.location.href = "cart.html";
    }

    function editAddress(index) {
      const updated = prompt("Edit Address:", addresses[index]);
      if (updated) {
        addresses[index] = updated.trim();
        localStorage.setItem("savedAddresses", JSON.stringify(addresses));
        renderList();
      }
    }

    function deleteAddress(index) {
      if (confirm("Are you sure you want to delete this address?")) {
        addresses.splice(index, 1);
        localStorage.setItem("savedAddresses", JSON.stringify(addresses));
        renderList();
      }
    }

    renderList();
  </script>
</body>
</html>
